(function(e){function t(t){for(var o,i,s=t[0],l=t[1],c=t[2],d=0,f=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("85ec"),r=n.n(o);r.a},"0651":function(e,t,n){},"202f":function(e,t,n){"use strict";var o=n("4e91"),r=n.n(o);r.a},"4e91":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i={name:"App",components:{},created:function(){}},s=i,l=(n("034f"),n("c852"),n("2877")),c=Object(l["a"])(s,r,a,!1,null,"04a7cf5a",null),u=c.exports,d=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("el-col",{attrs:{span:4}},[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"el-icon-date"}),e._v("会话管理")]),n("Tree",{attrs:{addTab:e.addTab}})],1),n("el-tab-pane",[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"el-icon-date"}),e._v("主题设置")]),n("el-input-number",{attrs:{"controls-position":"right",min:10,max:22},on:{change:e.handleChange},model:{value:e.fontsize,callback:function(t){e.fontsize=t},expression:"fontsize"}}),n("el-switch",{attrs:{"active-text":"按月付费","inactive-text":"按年付费"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1)],1)],1),n("el-col",{attrs:{span:20}},[n("TerminalTabs",{ref:"terminalTabs"})],1)],1)],1)},m=[],h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{attrs:{type:"card"},on:{"tab-remove":e.removeTab,"tab-click":e.switchTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,(function(t,o){return n("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name,index:o,closable:t.closable}},["1"===t.name?n("LatestUsed"):e._e(),"1"!==t.name?n("BaseTerm",{ref:t.name,refInFor:!0,attrs:{divId:t.divId,node:t.node}}):e._e()],1)})),1)},p=[],b=(n("4de4"),n("4160"),n("b0c0"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:e.divId}})}),v=[],g=(n("1913"),n("abb2"),n("fcf3")),y=n("47d0"),k={name:"BaseTerm",props:{divId:String,node:Object},data:function(){return{term:{},socket:{},uuid_str:"",timeout:3e4,timeoutObj:null,serverTimeoutObj:null,timeoutnum:null}},methods:{initXterm:function(){var e=this.$store.state.theme;console.log("vuex-fontsize",e.fontsize),this.term=new g["Terminal"]({rendererType:"canvas",cols:170,rows:38,convertEol:!0,scrollback:100,disableStdin:!1,cursorStyle:"underline",cursorBlink:!0,fontWeight:600,fontSize:e.fontsize,fontFamily:" Consolas, Microsoft YaHei, 'Courier New', monospace ",theme:{foreground:"#009688",background:"#060101",cursor:"#ffffff"}}),this.term.open(document.getElementById(this.divId));var t=new y["FitAddon"];this.term.loadAddon(t);var n=this;this.term.onData((function(e){n.socket.onsend(JSON.stringify({type:"command",data:e}))}))},init:function(e){this.socket=new WebSocket(e),this.socket.onopen=this.open,this.socket.onerror=this.error,this.socket.onmessage=this.getMessage,this.socket.onsend=this.send},open:function(){console.log("socket连接成功"),this.initXterm(),this.socket.onsend(JSON.stringify({type:"connect",data:this.node.id})),this.heartbeat()},error:function(){console.log("连接错误")},close:function(){this.socket.close(),console.log("socket已经关闭")},getMessage:function(e){this.term.write(e.data)},send:function(e){this.socket.send(e)},heartbeat:function(){var e=this;e.timeoutObj&&clearTimeout(e.timeoutObj),e.timeoutObj=setTimeout((function(){1===e.socket.readyState&&(console.log("发送心跳"),e.socket.send(JSON.stringify({type:"heartbeat",data:""})))}),e.timeout)}},mounted:function(){var e="ws://127.0.0.1:6543/terminal";this.init(e)},destroyed:function(){console.log("页面destroyed"),this.socket.close(),clearTimeout(this.timeoutObj)}},w=k,x=Object(l["a"])(w,b,v,!1,null,"5772c0dc",null),C=x.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-main",{staticStyle:{"overscroll-behavior-y":"auto"}})},O=[],N={name:"LatestUsed",data:function(){return{activeIndex:"1",currentDate:""}},methods:{handleSelect:function(e,t){console.log(e,t)}}},F=N,_=Object(l["a"])(F,T,O,!1,null,"03fda302",null),D=_.exports,$={name:"TerminalTabs",components:{BaseTerm:C,LatestUsed:D},data:function(){return{editableTabsValue:"1",editableTabs:[{title:"工作台",name:"1",closable:!1,divId:"terminal_p"}],tabIndex:1,activeName:1}},methods:{addTab:function(e){var t=++this.tabIndex+"";this.editableTabs.push({title:e.name+"-"+e.config.host,name:t,closable:!0,divId:"terminal_"+t,node:e}),this.editableTabsValue=t,this.activeName=t},removeTab:function(e){var t=this.editableTabs,n=this.editableTabsValue;n===e&&t.forEach((function(o,r){if(o.name===e){var a=t[r+1]||t[r-1];a&&(n=a.name)}})),this.editableTabsValue=n,this.activeName=n,this.editableTabs=t.filter((function(t){return t.name!==e}))},switchTab:function(e){this.activeName=e.name}},mounted:function(){}},L=$,S=Object(l["a"])(L,h,p,!1,null,"3a0b9ad1",null),j=S.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"min-height":"500px"}},[n("div",{ref:"box",class:["box",e.theme],on:{contextmenu:function(t){return t.preventDefault(),e.handleShow(t)}}},[n("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.data,props:e.defaultProps,"default-expanded-keys":e.defaultExpandedKeys,"highlight-current":!0},on:{"node-click":e.handleNodeClick,"node-contextmenu":e.handleContextMenu},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,r=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[n("i",{class:r.icon}),e._v(" "+e._s(o.label)+" ")])])}}])})],1),n("v-contextmenu",{ref:"contextmenu"},[e.isNodeClick?e._e():n("v-contextmenu-item",{on:{click:e.handleAddFolder}},[e._v("新建文件夹")]),e.isNodeClick?e._e():n("v-contextmenu-item",{on:{click:e.handleAddConnect}},[e._v("新建连接")]),e.isItemClick&&"FOLDER"===e.currentClickNodeData.type?n("v-contextmenu-item",{on:{click:e.handleEditFolder}},[e._v(" 编辑 ")]):e._e(),e.isItemClick&&"FOLDER"===e.currentClickNodeData.type?n("v-contextmenu-item",{on:{click:e.handleDeleteFolder}},[e._v("删除 ")]):e._e(),e.isItemClick&&"NODE"===e.currentClickNodeData.type?n("v-contextmenu-item",{on:{click:e.handleEditNode}},[e._v("编辑 ")]):e._e(),e.isItemClick&&"NODE"===e.currentClickNodeData.type?n("v-contextmenu-item",{on:{click:e.handleDeleteNode}},[e._v(" 删除 ")]):e._e()],1),n("FolderForm",{attrs:{dialogFormVisible:e.folderFormVisible,cancel:e.handleFolderFormCancel,form:e.folderForm,treeRefresh:e.refresh,currentClickNodeData:e.currentClickNodeData,folderTitle:e.folderTitle}}),n("ConnectForm",{attrs:{dialogFormVisible:e.connectFormVisible,cancel:e.handleConnectFormCancel,form:e.connectForm,treeRefresh:e.refresh,currentClickNodeData:e.currentClickNodeData,connectTitle:e.connectTitle}})],1)},R=[],I=(n("a4d3"),n("e01a"),n("ac1f"),n("841c"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.folderTitle,visible:e.dialogFormVisible,"show-close":!1,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth,prop:"name"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth,prop:"description"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.onCancel}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("确 定")])],1)],1)}),M=[],V={name:"FolderForm",props:{dialogFormVisible:{type:Boolean,default:!1},cancel:Function,form:Object,treeRefresh:Function,currentClickNodeData:Object,folderTitle:String},data:function(){return{formLabelWidth:"120px",rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:500,message:"长度在 1 到 500 个字符",trigger:"blur"}],description:[{min:0,max:500,message:"长度在 0 到 500 个字符",trigger:"blur"}]}}},methods:{openLayer:function(e,t,n){"error"===n?this.$notify.error({title:e,message:t}):this.$notify({title:e,message:t,type:n})},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var n=t,o=n.form;o.type="FOLDER",console.log(JSON.stringify(o)),0===o.id?(o.parentId=-1,null!=t.currentClickNodeData&&(o.parentId=t.currentClickNodeData.id),n.$api.post("/ecs",JSON.stringify(o),(function(e){void 0!==e&&void 0!==e.status&&200===e.status?(t.openLayer("消息","恭喜你，新增成功。","success"),t.onCancel(),t.treeRefresh()):t.openLayer("消息",e.data,"error")}))):n.$api.put("/ecs",JSON.stringify(o),(function(e){console.log(e),void 0!==e&&void 0!==e.status&&200===e.status?(t.openLayer("消息","恭喜你，修改成功。","success"),t.onCancel(),t.treeRefresh()):t.openLayer("消息",e.data,"error")}))}))},onCancel:function(){this.cancel()}}},P=V,W=Object(l["a"])(P,I,M,!1,null,"a0258aa6",null),U=W.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.connectTitle,visible:e.dialogFormVisible,"show-close":!1,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth,prop:"name"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-row",[n("el-col",{attrs:{span:16}},[n("el-form-item",{attrs:{label:"主机地址","label-width":e.formLabelWidth,prop:"host"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.host,callback:function(t){e.$set(e.form,"host",t)},expression:"form.host"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"端口号","label-width":e.formLabelWidth,prop:"port"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",t)},expression:"form.port"}})],1)],1)],1),n("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"user"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.user,callback:function(t){e.$set(e.form,"user",t)},expression:"form.user"}})],1),n("el-form-item",{attrs:{label:"验证方式","label-width":e.formLabelWidth}},[n("el-select",{attrs:{placeholder:"请选择验证方式"},on:{change:e.chooseMethod},model:{value:e.form.authMethod,callback:function(t){e.$set(e.form,"authMethod",t)},expression:"form.authMethod"}},[n("el-option",{attrs:{label:"密码",value:"password"}}),n("el-option",{attrs:{label:"密钥",value:"rsa"}})],1)],1),"password"===e.form.authMethod?n("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),"rsa"===e.form.authMethod?n("el-row",[n("el-col",{attrs:{span:18}},[n("el-form-item",{attrs:{label:"选择文件","label-width":e.formLabelWidth,prop:"identity"}},[n("el-select",{attrs:{filterable:"",placeholder:"选择已上传的密钥文件"},model:{value:e.form.identity,callback:function(t){e.$set(e.form,"identity",t)},expression:"form.identity"}},e._l(e.rsaOptions,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-upload",{attrs:{action:e.uploadUrl(),"before-upload":e.beforeUpload,multiple:"","show-file-list":!1,limit:1,"on-exceed":e.handleExceed,"on-success":e.handleSuccess,"on-progress":e.uploadProcess}},[n("el-button",{attrs:{size:"medium",type:"primary"}},[e._v("点击上传")])],1)],1)],1):e._e(),n("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth,prop:"description"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.onCancel}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("确 定")])],1)],1)},z=[],q=(n("99af"),n("96cf"),n("1da1")),A={name:"ConnectForm",props:{dialogFormVisible:{type:Boolean,default:!1},cancel:Function,form:Object,treeRefresh:Function,currentClickNodeData:Object,connectTitle:String},data:function(){return{options:[{value:"password",label:"密码"},{value:"rsa",label:"密钥"}],formLabelWidth:"80px",rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:500,message:"长度在 1 到 500 个字符",trigger:"blur"}],description:[{min:0,max:500,message:"长度在 0 到 500 个字符",trigger:"blur"}],host:[{required:!0,message:"请输入主机地址",trigger:"blur"}],port:[{required:!0,message:"请输入端口号",trigger:"blur"}],user:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],identity:[{required:!0,message:"请选择密钥文件",trigger:"change"}]},rsaOptions:[]}},methods:{openLayer:function(e,t,n){"error"===n?this.$notify.error({title:e,message:t}):this.$notify({title:e,message:t,type:n})},onSubmit:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(n){var o,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}o=t,r=o.form,r.type="NODE",0===r.id?(r.parentId=-1,null!=t.currentClickNodeData&&(r.parentId=t.currentClickNodeData.id),a={host:r.host,port:r.port,user:r.user,password:r.password,identity:r.identity,passphrase:r.passphrase,authMethod:r.authMethod},r.config=JSON.stringify(a),console.log(r),o.$api.post("/ecs",JSON.stringify(r),(function(e){void 0!==e&&void 0!==e.status&&200===e.status?(t.openLayer("消息","恭喜你，新增成功。","success"),t.onCancel(),t.treeRefresh()):t.openLayer("消息",e.data,"error")}))):(i={host:r.host,port:r.port,user:r.user,password:r.password,identity:r.identity,passphrase:r.passphrase,authMethod:r.authMethod},r.config=JSON.stringify(i),o.$api.put("/ecs",JSON.stringify(r),(function(e){console.log(e),void 0!==e&&void 0!==e.status&&200===e.status?(t.openLayer("消息","恭喜你，修改成功。","success"),t.onCancel(),t.treeRefresh()):t.openLayer("消息",e.data,"error")}))),e.next=9;break;case 7:return console.log("error submit!!"),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},chooseMethod:function(e){var t=this;return Object(q["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("rsa"!==e){n.next=5;break}return n.next=3,t.initRsaList();case 3:o=n.sent,t.rsaOptions=o.data;case 5:case"end":return n.stop()}}),n)})))()},onCancel:function(){this.cancel()},uploadUrl:function(){return"http://127.0.0.1:8082/rsa/upload?host="+this.form.host},handleSuccess:function(e,t){var n=this;return Object(q["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("rsa"!==n.form.authMethod){e.next=6;break}return e.next=3,n.initRsaList();case 3:t=e.sent,n.rsaOptions=t.data,n.openLayer("消息","文件上传成功, 密钥文件列表已刷新","success");case 6:case"end":return e.stop()}}),e)})))()},uploadProcess:function(e,t,n){},beforeUpload:function(e){if(console.log("文件校验"),null===this.form.host||""===this.form.host)return this.$message.warning("请填写连接主机，将根据连接的主机进行文件夹的创建"),!1;var t=e.size/1024/1024<1;return-1==="rsa".indexOf(e.type)?(this.$message.error("请上传正确的文件格式"),!1):t?void 0:(this.$message.error("RSA文件不能超过1MB哦!"),!1)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},initRsaList:function(){var e=this;return Object(q["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,t.next=3,n.$api.syncGet("/rsa/list",{host:e.form.host});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(q["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(void 0!==e.form.host&&null!==e.form.host&&""!==e.form.host){t.next=4;break}e.rsaOptions=[],t.next=8;break;case 4:return t.next=6,e.initRsaList();case 6:n=t.sent,e.rsaOptions=n.data;case 8:case"end":return t.stop()}}),t)})))()}},B=A,G=(n("202f"),Object(l["a"])(B,J,z,!1,null,"5805d227",null)),X=G.exports,Y={name:"Tree",props:{addTab:Function,theme:String},components:{FolderForm:U,ConnectForm:X},data:function(){return{defaultExpandedKeys:[1],data:[],defaultProps:{children:"children",label:"name",isLeaf:"leaf",icon:"icon"},loading:!0,folderFormVisible:!1,connectFormVisible:!1,folderForm:{id:0,name:"",description:""},connectForm:{id:0,name:"",description:"",host:"",port:"",user:"",password:"",identity:"",passphrase:"",authMethod:"password"},isItemClick:!1,isNodeClick:!1,currentClickNodeData:null,folderTitle:"新增文件夹",connectTitle:"新增连接"}},methods:{handleNodeClick:function(e){"NODE"===e.type&&(console.log("node: ",e),this.addTab(e))},handleContextMenu:function(e,t,n){var o={top:e.clientY,left:e.clientX};this.isItemClick=!0,"FOLDER"===t.type?this.isNodeClick=!1:this.isNodeClick=!0,this.currentClickNodeData=t,this.$refs.contextmenu.show(o)},handleShow:function(e){var t=e.clientY,n=e.clientX,o={top:t,left:n};this.isItemClick=!1,this.$refs.contextmenu.show(o),this.isNodeClick=!1,this.currentClickNodeData=null},handleHide:function(){this.$refs.contextmenu.hide()},refresh:function(){this.search()},search:function(){var e=this;this.loading=!0;var t=this;t.$api.get("/ecs/tree",{},(function(t){e.data=t.data}))},handleAddFolder:function(){this.folderFormVisible=!0,this.folderTitle="新增文件夹",this.folderForm={id:0,name:"",description:""}},handleEditFolder:function(){this.folderFormVisible=!0,this.folderTitle="编辑文件夹",this.folderForm={id:this.currentClickNodeData.id,name:this.currentClickNodeData.name,description:this.currentClickNodeData.description}},handleDeleteFolder:function(){var e=this;console.log("删除文件夹");var t=this;t.$api.delete("/ecs",{id:this.currentClickNodeData.id},(function(t){void 0!==t&&void 0!==t.status&&200===t.status?(e.openLayer("消息","恭喜你，删除成功。","success"),e.refresh()):e.openLayer("消息",t.data,"error")}))},handleAddConnect:function(){this.connectTitle="新增连接",this.connectForm={id:0,name:"",description:"",host:"",port:"",user:"",password:"",identity:"",passphrase:"",authMethod:"password"},this.connectFormVisible=!0},handleEditNode:function(){this.connectTitle="编辑连接",this.connectForm={id:this.currentClickNodeData.id,name:this.currentClickNodeData.name,description:this.currentClickNodeData.description,host:this.currentClickNodeData.config.host,port:this.currentClickNodeData.config.port,user:this.currentClickNodeData.config.user,password:this.currentClickNodeData.config.password,identity:this.currentClickNodeData.config.identity,passphrase:this.currentClickNodeData.config.passphrase,authMethod:this.currentClickNodeData.config.authMethod},this.connectFormVisible=!0},handleDeleteNode:function(){var e=this;console.log("删除链接");var t=this;t.$api.delete("/ecs",{id:this.currentClickNodeData.id},(function(t){void 0!==t&&void 0!==t.status&&200===t.status?(e.openLayer("消息","恭喜你，删除成功。","success"),e.refresh()):e.openLayer("消息",t.data,"error")}))},handleFolderFormCancel:function(){this.folderFormVisible=!1,this.folderForm={id:0,name:"",description:""}},handleConnectFormCancel:function(){this.connectFormVisible=!1,this.connectForm={id:0,name:"",description:"",host:"",port:"",user:"",password:"",identity:"",passphrase:"",authMethod:"password"}},openLayer:function(e,t,n){"error"===n?this.$notify.error({title:e,message:t}):this.$notify({title:e,message:t,type:n})}},mounted:function(){var e=this,t=this;t.$api.get("/ecs/tree",{},(function(t){e.data=t.data})),this.$store.dispatch("getTheme")}},H=Y,K=Object(l["a"])(H,E,R,!1,null,"79e6b362",null),Q=K.exports,Z={name:"Terminal",components:{TerminalTabs:j,Tree:Q},data:function(){return{fontsize:16,value1:"好的"}},methods:{addTab:function(e){this.$refs.terminalTabs.addTab(e)},handleChange:function(e){return console.log(e),e}}},ee=Z,te=Object(l["a"])(ee,f,m,!1,null,"287f4399",null),ne=te.exports;o["default"].use(d["a"]);var oe=[{path:"/**",name:"Index",component:ne,meta:{title:"远程链接终端"}},{path:"/index",name:"Index",component:ne,meta:{title:"远程链接终端"}}],re=new d["a"]({mode:"history",base:"/",routes:oe}),ae=d["a"].prototype.push;d["a"].prototype.push=function(e){return ae.call(this,e).catch((function(e){return e}))};var ie=re,se=n("5c96"),le=n.n(se),ce=(n("0fae"),n("baa5"),n("d3b7"),n("bc3a")),ue=n.n(ce),de="http://127.0.0.1:6543",fe=ue.a.create({baseURL:de,withCredentials:!0,headers:{"Content-Type":"application/json;charset-UTF-8"}});function me(e,t,n,o){fe({method:e,url:t,data:"POST"===e||"PUT"===e?n:null,params:"GET"===e||"DELETE"===e?n:null}).then((function(e){o(e)})).catch((function(e){o(e)}))}ue.a.interceptors.request.use((function(e){return console.log("请求拦截器"),e}),(function(e){return Promise.reject(e)})),ue.a.interceptors.response.use((function(e){return console.log("响应拦截器"),e}),(function(e){return Promise.reject(e)}));var he={get:function(e,t,n){return me("GET",e,t,n)},post:function(e,t,n){return me("POST",e,t,n)},put:function(e,t,n){return me("PUT",e,t,n)},delete:function(e,t,n){return me("DELETE",e,t,n)},syncGet:function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(t,n){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in o="",n)!0===n.hasOwnProperty(r)&&(o+=encodeURIComponent(r)+"="+encodeURIComponent(n[r])+"&");return o=o.substring(0,o.lastIndexOf("&")),e.next=5,ue.a.get(de+t+"?"+o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},pe=he,be=n("d625"),ve=(n("64d2"),n("2f62"));o["default"].use(ve["a"]);var ge=new ve["a"].Store({state:{theme:{}},mutations:{setTheme:function(e,t){console.log("fontsize",t),e.theme=t}},actions:{getTheme:function(e){var t=this;console.log("vuex",e),o["default"].prototype.$api.get("ecs/theme",{},(function(n){void 0!==n&&void 0!==n.status&&200===n.status?e.commit("setTheme",n.data):t.openLayer("消息",n.data,"error")}))}}}),ye=ge;o["default"].prototype.$api=pe,o["default"].config.productionTip=!1,o["default"].use(le.a),o["default"].use(be["a"]),o["default"].use(ve["a"]),ie.beforeEach((function(e,t,n){e.meta.title&&(document.title=e.meta.title),n()})),new o["default"]({router:ie,store:ye,render:function(e){return e(u)}}).$mount("#app")},"85ec":function(e,t,n){},c852:function(e,t,n){"use strict";var o=n("0651"),r=n.n(o);r.a}});
//# sourceMappingURL=app.58a9aedc.js.map